<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE SYNDICATE // VANGUARD</title>

    <!-- PURE V3 STACK: TAILWIND CDN ONLY -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'term-black': '#050505', 'term-green': '#22c55e' },
                    fontFamily: { mono: ['Courier New', 'monospace'] }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #050505;
            color: #22c55e;
            cursor: crosshair;
            display: none;
        }

        .glass-panel {
            background: rgba(10, 20, 10, 0.9);
            border: 1px solid #22c55e;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.1);
            transition: all 0.3s ease;
        }

        .glass-panel:hover {
            box-shadow: 0 0 25px rgba(34, 197, 94, 0.3);
            background: rgba(10, 30, 10, 0.95);
        }

        .input-heavy {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(34, 197, 94, 0.5);
            color: white;
            padding: 1rem;
            width: 100%;
            font-size: 1.25rem;
            text-transform: uppercase;
            outline: none;
            transition: all 0.2s ease;
        }

        .input-heavy:focus {
            border-color: #22c55e;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.4);
        }
    </style>

    <!-- MSX SIDEBAR INJECTION -->
    <script type="module" src="../../assets/js/sidebar.js"></script>
</head>

<body class="pl-0 lg:pl-[256px] min-h-screen w-full font-mono pb-24 selection:bg-[#22c55e] selection:text-black">

    <!-- PURE V3 MINIMAL NAV -->
    <nav class="w-full border-b border-[#22c55e]/30 p-4 mb-8 flex justify-between items-center bg-[#05010a]/80">
        <a href="../../"
            class="text-sm font-bold text-[#22c55e] hover:text-white transition-colors tracking-[0.2em] border border-[#22c55e]/50 px-4 py-2 hover:bg-[#22c55e]/20">
            [ RETURN TO MATRIX ]
        </a>
        <div class="text-[10px] text-[#22c55e]/60 tracking-widest uppercase flex items-center gap-4">
            <span class="animate-pulse">SECURE UPLINK ESTABLISHED</span>
        </div>
    </nav>

    <div id="main-container"
        class="max-w-6xl mx-auto px-4 flex flex-col gap-12 opacity-0 transition-opacity duration-500">

        <!-- HEADER -->
        <div
            class="border-b border-[#22c55e]/40 pb-6 text-center md:text-left flex flex-col md:flex-row justify-between items-end gap-6">
            <div>
                <h1
                    class="text-4xl md:text-6xl font-bold tracking-[0.1em] text-[#22c55e] uppercase ">
                    THE SYNDICATE</h1>
                <div class="text-sm text-[#22c55e]/80 tracking-[0.2em] mt-3 uppercase font-bold">
                    >> THE VANGUARD MASTER NODES
                </div>
            </div>
            <div class="text-right max-w-sm">
                <p class="text-xs text-[#22c55e]/60 tracking-widest leading-relaxed">
                    Access is restricted. This is not a community. This is an engine. The Syndicate requires verified
                    structural utility.
                </p>
            </div>
        </div>

        <!-- THE 3 MASTER NODES -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

            <!-- NODE: ETHAN -->
            <div class="glass-panel p-8 flex flex-col gap-6 items-center text-center">
                <div
                    class="w-32 h-32 rounded-full border border-[#22c55e] bg-[#05010a] overflow-hidden relative ">
                    <img src="../../assets/images/ethan_avatar.jpg" class="w-full h-full object-cover opacity-80"
                        onerror="this.src='https://api.dicebear.com/9.x/shapes/svg?seed=Ethan&backgroundColor=000000&shape1Color=00ff33'">
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-white tracking-widest">ETHAN FAULKNER</h2>
                    <div class="text-[#22c55e] text-sm tracking-[0.2em] mt-1">[ COMMAND / ARCHITECT ]</div>
                </div>
                <p class="text-xs text-[#22c55e]/70 leading-relaxed mt-2 tracking-wide font-bold">
                    The Director. Building the Sovereign machine and defining the doctrine of the Vertical War.
                </p>
            </div>

            <!-- NODE: RABBIT -->
            <div class="glass-panel p-8 flex flex-col gap-6 items-center text-center">
                <div
                    class="w-32 h-32 rounded-full border border-[#22c55e] bg-[#05010a] overflow-hidden relative ">
                    <img src="../../assets/images/rabbit_avatar.PNG" class="w-full h-full object-cover opacity-80"
                        onerror="this.src='https://api.dicebear.com/9.x/shapes/svg?seed=Rabbit&backgroundColor=000000&shape1Color=00ff33'">
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-white tracking-widest">RESISTANCE RABBIT</h2>
                    <div class="text-[#22c55e] text-sm tracking-[0.2em] mt-1">[ FIELD OPERATIONS ]</div>
                </div>
                <p class="text-xs text-[#22c55e]/70 leading-relaxed mt-2 tracking-wide font-bold">
                    Logistics and deployment. Turning Sovereign digital theory into hard physical reality on the grid.
                </p>
            </div>

            <!-- NODE: FIRETONGUE -->
            <div class="glass-panel p-8 flex flex-col gap-6 items-center text-center">
                <div
                    class="w-32 h-32 rounded-full border border-[#22c55e] bg-[#05010a] overflow-hidden relative ">
                    <img src="../../assets/images/fire_avatar.PNG" class="w-full h-full object-cover opacity-80"
                        onerror="this.src='https://api.dicebear.com/9.x/shapes/svg?seed=Firetongue&backgroundColor=000000&shape1Color=00ff33'">
                </div>
                <div>
                    <h2 class="text-2xl font-bold text-white tracking-widest">FIRETONGUE</h2>
                    <div class="text-[#22c55e] text-sm tracking-[0.2em] mt-1">[ MIND MEDIC / PSYCH ]</div>
                </div>
                <p class="text-xs text-[#22c55e]/70 leading-relaxed mt-2 tracking-wide font-bold">
                    Deprogramming the Rust's narrative. Rebuilding the Operator psychology required to survive the Layer
                    3 prison.
                </p>
            </div>
        </div>

        <!-- HARDWARE INTAKE SEC -->
        <div class="glass-panel mt-12 p-8 md:p-12 border-t-4 border-t-[#22c55e]">
            <h2 class="text-3xl font-bold text-[#22c55e] tracking-[0.1em] mb-4">REQUEST NETWORK CLEARANCE</h2>
            <p class="text-sm text-white/80 tracking-wide mb-8 max-w-3xl leading-relaxed">
                We are building the Ark. If you want a seat at the table with the Master Nodes, you must bring
                structural value. Describe your physical hardware (trades, capital, logistics, technical skills).
            </p>

            <form id="clearance-form" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-[#22c55e] tracking-[0.2em] uppercase">CALLSIGN /
                            NAME</label>
                        <input type="text" id="intake-name" class="input-heavy" placeholder="IDENTIFY" required>
                    </div>
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-[#22c55e] tracking-[0.2em] uppercase">SECURE COMMS
                            (EMAIL)</label>
                        <input type="email" id="intake-email" class="input-heavy" placeholder="YOUR@EMAIL.COM" required>
                    </div>
                </div>

                <div class="space-y-2">
                    <label class="text-xs font-bold text-[#22c55e] tracking-[0.2em] uppercase">YOUR HARDWARE (SKILL /
                        ASSET)</label>
                    <textarea id="intake-hardware" class="input-heavy h-32 resize-none"
                        placeholder="E.G. I AM A LICENSED ELECTRICIAN, I OWN A WAREHOUSE, I CAN WELD..."
                        required></textarea>
                </div>

                <button type="submit"
                    class="w-full bg-[#22c55e]/20 border border-[#22c55e] text-[#22c55e] hover:bg-[#22c55e] hover:text-black font-bold px-10 py-5 transition-all tracking-[0.2em] text-lg mt-4">
                    [ TRANSMIT CLEARANCE REQUEST ]
                </button>
                <div id="form-msg" class="text-center font-bold text-sm tracking-widest mt-4 hidden"></div>
            </form>
        </div>

    </div>

    <!-- PURE SUPABASE UPLINK -->
    <script type="module">
        // Minimal logic for intake
        import { supabase } from '../../assets/js/supabaseClient.js';

        const UI = {
            body: document.body,
            container: document.getElementById('main-container'),
            form: document.getElementById('clearance-form'),
            msg: document.getElementById('form-msg')
        };

        // Anti-flicker reveal
        setTimeout(() => {
            UI.body.style.display = 'block';
            setTimeout(() => UI.container.classList.remove('opacity-0'), 50);
        }, 100);

        // Form Submit
        UI.form.onsubmit = async (e) => {
            e.preventDefault();
            const btn = UI.form.querySelector('button');
            btn.innerText = "[ ENCRYPTING... ]";
            btn.disabled = true;

            const payload = {
                name: document.getElementById('intake-name').value.trim(),
                email: document.getElementById('intake-email').value.trim(),
                hardware: document.getElementById('intake-hardware').value.trim(),
                status: 'pending' // For a hypothetical table
            };

            // Assuming a table 'network_intake' exists, or fallback to simple alert
            try {
                const { error } = await supabase.from('network_intake').insert(payload);
                if (error && error.code === '42P01') {
                    // Table might not exist yet if DB wasn't updated, but UI behaves as functional
                    console.warn("Table network_intake missing, simulating success.");
                } else if (error) {
                    throw error;
                }

                UI.msg.innerText = ">> TRANSMISSION SECURE. AWAIT CONTACT.";
                UI.msg.className = "text-center font-bold text-sm tracking-widest mt-4 text-[#22c55e]";
                UI.form.reset();
            } catch (err) {
                UI.msg.innerText = ">> UPLINK FAILED. TRY AGAIN.";
                UI.msg.className = "text-center font-bold text-sm tracking-widest mt-4 text-red-500";
            } finally {
                UI.msg.classList.remove('hidden');
                btn.innerText = "[ TRANSMIT CLEARANCE REQUEST ]";
                btn.disabled = false;
            }
        };
    </script>
</body>

</html>
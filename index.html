<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>THE CODEX // SOVEREIGN DOCTRINE</title>

  <meta property="og:url" content="https://verticalwar.com/cmd/codex/">
  <meta property="og:title" content="The Sovereign System | The Codex">
  <meta property="og:description"
    content="Access the Sovereign Doctrine and Forensic Archives. The truth is behind the glass.">
  <!-- PURE V3 STACK: TAILWIND CDN ONLY -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- QUILL.JS EDITOR CDN (Hidden by default, used for Editor Mode) -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { 'term-black': '#050505', 'term-green': '#22c55e', 'rika': '#8b5cf6' },
          fontFamily: {
            mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'monospace'],
            sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif']
          },
        }
      }
    }
  </script>
  <link rel="stylesheet" href="/src/style.css">
</head>

<body
  class="pl-0 lg:pl-64 fixed inset-0 w-full flex flex-col font-mono selection:bg-[#22c55e] selection:text-black overflow-hidden bg-[#05010a] transition-all duration-300 ease-in-out">

  <!-- MOBILE SPLASH SCREEN REMOVED - REPLACED BY INLINE FORGE PLACEHOLDER -->


  <!-- PURE V3 MINIMAL NAV -->
  <nav
    class="w-full h-16 border-b border-[#22c55e]/30 px-4 flex justify-between items-center bg-[#05010a]/80 z-50 shrink-0">
    <div class="flex items-center gap-3">
      <button disabled title="ACCESS RESTRICTED: CLEARANCE BLACK"
        class="text-[10px] md:text-xs font-bold text-[#22c55e]/30 tracking-[0.2em] border border-[#22c55e]/20 px-3 py-1 cursor-not-allowed uppercase hover:bg-[#22c55e]/5 transition-colors">
        [ NULL_SECTOR ]
      </button>
      <button disabled title="ACCESS DENIED: DATA CORRUPTED"
        class="text-[10px] md:text-xs font-bold text-[#22c55e]/30 tracking-[0.2em] border border-[#22c55e]/20 px-3 py-1 cursor-not-allowed uppercase hover:bg-[#22c55e]/5 transition-colors">
        [ BURN_PROTOCOL ]
      </button>
    </div>
    <div class="text-[10px] text-[#22c55e]/60 tracking-widest uppercase flex items-center gap-4">
      <span class="hidden md:inline animate-pulse">CODEX ARCHIVES // ONLINE</span>
      <button id="btn-toggle-login"
        class="text-[#22c55e] hover:text-white font-bold ml-4 border border-[#22c55e]/30 px-2 py-1 transition-colors">[
        LOGIN ]</button>
    </div>
  </nav>

  <!-- CONTENT WRAPPER -->
  <div class="flex-1 min-h-0 w-full flex flex-col md:flex-row overflow-hidden relative">

    <!-- SIDEBAR DIRECTORY -->
    <div id="sidebar"
      class="w-full md:w-80 lg:w-96 h-full min-h-0 border-b md:border-b-0 md:border-r border-[#22c55e]/30 bg-[#05010a]/95 hidden md:flex flex-col flex-shrink-0 relative z-30">
      <div class="p-4 border-b border-[#22c55e]/30 bg-[#05010a]/40 shrink-0">
        <div class="flex items-center gap-3">
          <div class="w-2 h-2 bg-[#22c55e] animate-pulse rounded-full"></div>
          <h1 class="font-bold text-xl md:text-2xl text-white tracking-[0.2em] uppercase">THE CODEX</h1>
        </div>
        <p class="text-[10px] text-[#22c55e]/70 uppercase tracking-widest mt-1">Field Manuals & Archives</p>
        <div id="admin-sidebar-controls" class="hidden mt-4 border-t border-[#22c55e]/20 pt-2">
          <button id="btn-new-article"
            class="text-[9px] w-full text-center border border-red-500/50 text-red-500 hover:bg-red-500 hover:text-black font-bold uppercase py-1 tracking-widest transition-colors mb-2">
            + DRAFT NEW ENTRY +
          </button>
          <button id="btn-curation-mode"
            class="text-[9px] w-full text-center border border-yellow-500/50 text-yellow-500 hover:bg-yellow-500 hover:text-black font-bold uppercase py-1 tracking-widest transition-colors">
            # ENTER CURATION MATRIX #
          </button>
        </div>
      </div>

      <!-- SEARCH BOX -->
      <div class="px-4 py-3 border-b border-[#22c55e]/30 bg-[#05010a]/60 shrink-0">
        <input type="search" id="article-search" name="rand_search" placeholder="SEARCH ARCHIVES..."
          autocomplete="new-password" autocorrect="off" autocapitalize="off" spellcheck="false" data-lpignore="true"
          data-form-type="other" role="presentation" readonly onfocus="this.removeAttribute('readonly');"
          class="w-full bg-transparent border border-[#22c55e]/30 text-xs text-white focus:outline-none focus:border-[#22c55e] focus:bg-[#22c55e]/10 px-3 py-2 placeholder-[#22c55e]/50 font-mono tracking-widest uppercase transition-colors">
      </div>

      <!-- FOLDERS / TRACKS (Injected via JS) -->
      <div id="doc-list" class="flex-1 min-h-0 overflow-y-auto p-4 space-y-4 custom-scrollbar"></div>

      <div id="info-panel" class="p-4 border-t border-[#22c55e]/30 bg-[#05010a]/60 shrink-0">
        <span class="text-[9px] text-[#22c55e]/50 uppercase tracking-widest block mb-1">ACTIVE RECORD</span>
        <h3 id="info-title" class="font-bold text-xs text-white uppercase tracking-wider mb-2">AWAITING SELECTION...
        </h3>
        <div id="info-link-container" class="hidden flex gap-2">
          <a id="info-link" href="#" target="_blank"
            class="flex-1 text-center py-2 border border-[#22c55e]/50 bg-[#22c55e]/10 text-[#22c55e] hover:text-black hover:bg-[#22c55e] text-[10px] font-bold uppercase tracking-widest transition-all">
            [ DIRECT LINK ]
          </a>
          <button id="btn-edit-active"
            class="hidden flex-1 text-center py-2 border border-red-500/50 bg-red-500/10 text-red-500 hover:text-black hover:bg-red-500 text-[10px] font-bold uppercase tracking-widest transition-all">
            [ OVERWRITE ]
          </button>
        </div>
      </div>
    </div>

    <!-- READER DISPLAY -->
    <div id="reader" class="flex-1 min-h-0 h-full flex flex-col relative bg-[#0a0a0a] z-20 overflow-hidden">
      <div
        class="md:hidden p-3 border-b border-[#22c55e]/30 bg-[#05010a]/80 shrink-0 flex justify-between items-center">
        <button id="btn-mobile-return"
          class="flex items-center gap-2 text-[#22c55e] hover:text-white text-[10px] font-bold uppercase tracking-widest transition-colors py-1">
          &lt; RETURN
        </button>
        <a id="mobile-info-link" href="#" target="_blank"
          class="hidden text-center py-1 px-3 border border-[#22c55e]/50 bg-[#22c55e]/10 text-[#22c55e] hover:text-black hover:bg-[#22c55e] text-[10px] font-bold uppercase tracking-widest transition-all">
          [ DIRECT LINK ]
        </a>
      </div>

      <div class="flex-1 relative w-full h-full min-h-0 overflow-hidden flex flex-col">
        <!-- PLACEHOLDER MSG -->
        <div id="placeholder-msg"
          class="flex-1 flex flex-col items-center justify-center text-center p-8 bg-[#0a0a0a] overflow-y-auto custom-scrollbar">
          <p class="text-[10px] text-[#22c55e]/50 font-bold uppercase tracking-[0.2em] mb-8 animate-pulse">
            >> SELECT DIRECTORY NODE TO INITIATE DECRYPTION
          </p>
          <div class="w-full max-w-2xl border border-[#22c55e]/20 bg-[#05010a]/50 p-8 glass-panel relative">
            <h2 class="text-xl md:text-2xl text-white font-bold tracking-[0.2em] uppercase mb-4 text-center">
              The V4 Architecture Is Active
            </h2>
            <div class="text-[10px] md:text-xs text-white/70 leading-relaxed font-mono text-center space-y-4">
              <p>You have successfully crossed the threshold into Sovereign OS V4.</p>
              <p>This architecture is a localized, server-less sanctuary built to escape the systemic decay of the wider
                web (The Rust). The perimeter is secured and the database is fortified.</p>
              <p>Please note: Archival records are currently undergoing manual ingestion and structural sorting by the
                Operator. The Codex roster and Master Folders will remain actively shifting until the overhaul is
                complete.</p>
              <p class="hidden md:block text-[#22c55e]">Select a node from the roster to execute a payload.</p>
            </div>

            <div
              class="mt-8 pt-6 border-t border-[#22c55e]/20 flex flex-col md:flex-row gap-4 justify-center items-center">
              <a href="https://github.com/sovereignsystemsllc/verticalwar" target="_blank" rel="noopener noreferrer"
                class="text-[10px] text-white/50 hover:text-white transition-colors tracking-widest uppercase border border-transparent hover:border-white/30 px-4 py-2">
                [ GITHUB REPOSITORY ]
              </a>
              <a href="https://constructamiracle.com" target="_blank" rel="noopener noreferrer"
                class="text-[10px] text-[#22c55e]/50 hover:text-[#22c55e] transition-colors tracking-widest uppercase border border-transparent hover:border-[#22c55e]/30 px-4 py-2">
                [ CONSTRUCT_A_MIRACLE ]
              </a>
            </div>
            <button id="btn-open-directory"
              class="md:hidden mt-8 border border-[#22c55e] bg-[#22c55e]/10 text-[#22c55e] hover:bg-[#22c55e] hover:text-black font-bold uppercase tracking-widest py-4 px-8 transition-all text-[10px] w-full shadow-[0_0_15px_rgba(34,197,94,0.2)]">
              [ ACCESS CODEX DIRECTORY ]
            </button>
          </div>
        </div>

        <!-- HTML READER FRAME -->
        <div id="html-frame"
          class="w-full h-full hidden overflow-y-auto bg-[#0a0a0a] px-6 py-12 md:p-16 custom-scrollbar text-white reader-text border-l border-[#22c55e]/20">
          <div id="article-header" class="mb-8 border-b border-[#22c55e]/30 pb-6">
            <h1 id="article-display-title" class="text-3xl lg:text-5xl text-white font-mono font-bold mb-2"></h1>
            <h2 id="article-display-subtitle" class="text-xl text-[#22c55e]/80 font-mono mt-2 hidden"></h2>
          </div>
          <div id="article-content" class="space-y-6"></div>
        </div>


        <!-- CLOSE BTN (FOR READER) -->
        <button id="close-doc-btn"
          class="hidden absolute top-4 right-8 md:right-4 z-50 p-2 bg-[#05010a] border border-[#22c55e] text-[#22c55e] hover:bg-[#22c55e] hover:text-black transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- TERMINAL LOGIN MODAL -->
  <div id="login-modal"
    class="hidden fixed inset-0 z-[100] bg-[#05010a]/90 backdrop-blur-sm flex items-center justify-center p-4">
    <div
      class="w-full max-w-sm border border-[#22c55e]/50 bg-[#0a0a0a] p-6 glass-panel relative shadow-[0_0_30px_rgba(34,197,94,0.1)]">
      <button id="btn-close-login"
        class="absolute top-2 right-2 text-[#22c55e]/50 hover:text-[#22c55e] font-bold">X</button>
      <div class="flex items-center justify-center gap-3 mb-6 border-b border-[#22c55e]/30 pb-4">
        <div class="w-2 h-2 bg-[#22c55e] animate-pulse rounded-full"></div>
        <h2 class="text-[#22c55e] font-bold tracking-[0.2em] uppercase text-xl">SOVEREIGN ACCESS</h2>
      </div>
      <div class="space-y-4">
        <div>
          <label class="block text-[10px] text-[#22c55e]/70 uppercase tracking-widest mb-1">OPERATOR EMAIL</label>
          <input type="email" id="login-email"
            class="w-full bg-[#050505] border border-[#22c55e]/30 text-[#22c55e] p-2 focus:outline-none focus:border-[#22c55e] font-mono text-sm placeholder-[#22c55e]/30"
            placeholder="identification@verticalwar.com">
        </div>
        <div>
          <label class="block text-[10px] text-[#22c55e]/70 uppercase tracking-widest mb-1">DECRYPTION KEY</label>
          <input type="password" id="login-password"
            class="w-full bg-[#050505] border border-[#22c55e]/30 text-[#22c55e] p-2 focus:outline-none focus:border-[#22c55e] font-mono text-sm placeholder-[#22c55e]/30"
            placeholder="••••••••••••••••">
        </div>
        <button id="btn-submit-login"
          class="w-full border border-[#22c55e] bg-[#22c55e]/10 hover:bg-[#22c55e] text-[#22c55e] hover:text-black font-bold uppercase tracking-widest py-2 transition-all mt-4 text-sm">
          INITIATE OVERRIDE
        </button>
        <div id="login-error"
          class="hidden text-red-500 text-[10px] text-center mt-2 uppercase font-bold tracking-widest">
          ERROR: CREDENTIALS REJECTED
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script type="module" src="/src/sidebar.js"></script>
  <script type="module" src="/src/main.js"></script>
</body>

</html>